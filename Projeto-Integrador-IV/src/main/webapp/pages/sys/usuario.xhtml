<!DOCTYPE html>
<ui:composition xmlns="http://www.w3c.org/1999/xhtml"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">
    
<h:head>
	<style type="text/css">  
           .ui-widget {  
               font-size: 12px !important;  
           }  
       </style> 
       
</h:head>
  <h:body>
  
  <h:form id="root">
       <h:form id="formDataTable">
       	<div class="ui-grid ui-grid-responsive">
   			<div class="ui-grid-row">
       			<div class="ui-grid-col-8">
       				<p:inputText value="#{usuarioBean.pesquisa}" style="width: 98%;"/>
       			</div>
       			<div class="ui-grid-col-4">
       				<p:commandButton value="#{global.pesquisar}" 
	            					 actionListener="#{usuarioBean.pesquisar}"
	            					 icon="ui-icon-search" 
	            					 update="usuariosDatagrid"/>
        	
		        	<p:commandButton value="#{global.novo}" 
			            					 actionListener="#{usuarioBean.adicionar}"
			            					 icon="ui-icon-plus" 
			            					 update="root:formPopUp"
			            					 oncomplete="PF('formPopUp').show();"/>
       			</div>
   			</div>
		</div>
        	
        <br/>
           <p:dataTable var="item" value="#{usuarioBean.usuarios}" layout="grid"
       		paginator="true" id="usuariosDatagrid"
       		paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
       		rowsPerPageTemplate="10,20,30" rows="10">
           
           	<p:column headerText="#{global.codigo}" width="10%" >
      		 		<h:outputText value="#{item.codigo}" 
      		 					  dir="rtl"/>
   			</p:column>
   			
   			<p:column headerText="#{global.nome}" width="50%">
      		 		<h:outputText value="#{item.nome}"/>
   			</p:column>
   			
   			<p:column headerText="#{usuarioLabels.login}" width="40%">
      		 		<h:outputText value="#{item.login}" />
   			</p:column>
   			
   			<p:column headerText="#{global.opcoes}" width="20%">
      		 	<p:commandButton icon="ui-icon-pencil" 
			            		 actionListener="#{usuarioBean.editar(item)}"
			            		 update="root:formPopUp"
			            		 oncomplete="PF('formPopUp').show();">
			    </p:commandButton>
			    <p:commandButton icon="ui-icon-copy" 
			            		 actionListener="#{usuarioBean.clonar(item)}"
			            		 update="root:formPopUp"
			            		 oncomplete="PF('formPopUp').show();">
			    </p:commandButton>
   			</p:column>
           	
           </p:dataTable>
           
           </h:form>
            <p:dialog header="#{usuarioBean.obterTituloCadastro()}" 
            		  widgetVar="formPopUp" 
            		  id="formPopUp"
            		  modal="true"
            		  showEffect="explode">
            		  
			  	<h:form id="cadastro">
	        					
		            <h:panelGrid columns="3" cellpadding="10">
		            
		            	<p:outputLabel value="#{global.codigo}" />
		            	<p:inputText id="codigoInput" 
		            				 value="#{usuarioBean.usuario.codigo}" 
		            				 disabled="true"/>
		            	<p:message for="codigoInput"/>
		            	
		            	<p:outputLabel value="#{global.nome}" />
		            	<p:inputText id="nomeInput" 
		            				 value="#{usuarioBean.usuario.nome}"/>
		            	<p:message for="nomeInput" />
		            	
		            	<p:outputLabel value="#{usuarioLabels.login}" />
		            	<p:inputText id="loginInput" 
		            				 value="#{usuarioBean.usuario.login}"/>
		            	<p:message for="loginInput"/>
		            	
		            	<p:outputLabel value="#{usuarioLabels.senha}" />
		            	<p:password id="senhaImput" 
		            				value="#{usuarioBean.usuario.senha}"/>
		            	<p:message for="senhaImput" />
		            	
		            	<p:outputLabel value="#{usuarioLabels.confirmacaoSenha}" />
		            	<p:password id="reSenhaInput" 
		            				value="#{usuarioBean.usuario.confirmacaoSenha}"/>
		            	<p:message for="reSenhaInput"/>
		            
		            	<p:commandButton value="#{global.salvar}" 
		            					 actionListener="#{usuarioBean.salvar()}"
		            					 icon="ui-icon-disk"
		            					 process="cadastro"
		            					 update="cadastro">
		            	</p:commandButton>
		            </h:panelGrid>
	        	</h:form>
	        </p:dialog>
		</h:form>
   </h:body>
</ui:composition>